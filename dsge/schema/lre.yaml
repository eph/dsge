declarations:
  type: dict
  required: true
  schema:
    name:
      type: string
      required: true
    max_lead:
      type: integer
      required: false
    max_lag:
      type: integer
      required: false
    variables:
      type: list
      required: true
      schema:
        type: string
    parameters:
      type: list
      required: true
      schema:
        type: string
    shocks:
      type: list
      required: true
      schema:
        type: string
    observables:
      type: list
      schema:
        type: string
    auxiliary_parameters:
      type: list
      schema:
        type: string
    external:
      type: dict
    measurement_errors:
      type: list
      schema:
        type: string


equations:
  oneof:
  - type: dict
    schema:
      model:
        type: list
        required: true
        schema:
          type: string
      observables:
        type: dict
        required: true
        valuesrules:
          type: string
  - type: list

# Optional occasionally-binding constraint support via regimes/constraints
regimes:
  type: dict
  valuesrules:
    type: dict
    schema:
      equations:
        oneof:
        - type: dict
          schema:
            model:
              type: list
              required: true
              schema:
                type: string
            observables:
              type: dict
              required: false
              valuesrules:
                type: string
        - type: list

constraints:
  type: list
  schema:
    type: dict
    schema:
      name:
        type: string
        required: true
      when:
        type: string
        required: true
      binding_regime:
        type: string
        required: true
      normal_regime:
        type: string
        required: true
      horizon:
        type: integer
        required: false

# Optional mapping for multiple simultaneous constraints -> composite regime
regime_map:
  type: dict
  required: false
  valuesrules:
    type: string
    
calibration: !include common.yaml#calibration

estimation: !include common.yaml#estimation
